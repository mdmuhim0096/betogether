import{r as s,j as F}from"./index-BlfxKbPt.js";const T=({speed:u=1,fontSize:a=16,alphaFade:E=0,color:d="#000",chars:R="01",backgroundFill:$=`rgba(0, 0, 0, ${E})`,style:W={},density:k=1,columnGap:m=1.2,lineHeight:x=1.2})=>{const w=s.useRef(null),i=s.useRef(null),A=s.useRef([]),g=s.useRef(null),p=s.useCallback(()=>{const n=w.current;if(!n)return;const o=window.devicePixelRatio||1,h=n.clientWidth,M=n.clientHeight;n.width=Math.floor(h*o),n.height=Math.floor(M*o);const l=n.getContext("2d");l.scale(o,o),g.current=l;const t=Math.floor(h/(a*m)*k);A.current=new Array(t).fill(0).map(()=>({y:Math.floor(Math.random()*-20),speed:(Math.random()*1.2+.4)*u,changeInterval:Math.floor(Math.random()*30+10),tick:0})),l.font=`${a}px monospace`,l.textBaseline="top"},[a,u,k,m]);return s.useEffect(()=>(p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)),[p]),s.useEffect(()=>{const n=w.current;if(!n)return;const o=g.current||n.getContext("2d");g.current=o;const h=()=>R[Math.floor(Math.random()*R.length)];function M(){const t=g.current;if(!t)return;t.fillStyle=$,t.fillRect(0,0,n.clientWidth,n.clientHeight);const f=A.current;for(let r=0;r<f.length;r++){const e=f[r];e.tick++,e.tick%(e.changeInterval||20)===0&&(e.speed=(Math.random()*1.2+.4)*u);const v=typeof d=="function"?d(r):d,y=r*a*m,b=e.y*a*x;t.fillStyle="#ff0066",t.fillText(h(),y,b);for(let c=1;c<6;c++){const C=b-c*a*x;if(C<0)break;const j=Math.max(0,1-c*.15);t.fillStyle=l(v,j),t.fillText(h(),y,C)}e.y+=e.speed,e.y*a*x>n.clientHeight+Math.random()*1e3&&(e.y=Math.floor(Math.random()*-20),e.speed=(Math.random()*1.2+.4)*u)}i.current=requestAnimationFrame(M)}function l(t,f){if(t.startsWith("rgba"))return t.replace(/rgba\(([^)]+),\s*([01]?\.?\d*)\)/,`rgba($1, ${f})`);if(t.startsWith("rgb("))return t.replace("rgb(","rgba(").replace(")",`, ${f})`);if(t.startsWith("#"))try{const r=t.slice(1),e=parseInt(r.length===3?r.split("").map(c=>c+c).join(""):r,16),v=e>>16&255,y=e>>8&255,b=e&255;return`rgba(${v}, ${y}, ${b}, ${f})`}catch{return t}return t}return i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame(M),()=>{i.current&&cancelAnimationFrame(i.current)}},[R,u,a,d,$,m,x]),F.jsx("canvas",{ref:w,style:{display:"block",width:"100%",height:"100%",background:"transparent",...W}})};export{T as default};
